{"ast":null,"code":"import _objectSpread from \"/Users/airbook/Desktop/SaiTeja_Transin/bounding-box/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/airbook/Desktop/SaiTeja_Transin/bounding-box/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Boundingbox from 'react-bounding-box';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selected: false,\n      x: -1,\n      y: -1,\n      w: -1,\n      h: -1\n    };\n    this.canvas = null;\n    this.ctx = null;\n    this.dirty = false;\n    this.drag = false;\n    this.startX = -1;\n    this.startY = -1;\n    this.curX = -1;\n    this.curY = -1;\n    this.width = \"640\";\n    this.height = \"480\";\n\n    this.updateCanvas = () => {\n      let self = this;\n\n      if (this.drag) {\n        requestAnimationFrame(this.updateCanvas);\n      }\n\n      if (!this.dirty) {\n        return;\n      }\n\n      this.canvas = document.getElementById('canvas2');\n      var myImage = new Image();\n      myImage.src = \"https://image.shutterstock.com/image-photo/bright-spring-view-cameo-island-260nw-1048185397.jpg\";\n      this.ctx = this.canvas.getContext('2d');\n\n      myImage.onload = function () {\n        self.ctx.drawImage(myImage, 0, 0, 300, 200);\n      };\n\n      this.ctx.clearRect(0, 0, this.width, this.height);\n\n      if (this.drag) {\n        const rect = {\n          x: this.startX,\n          y: this.startY,\n          w: this.curX - this.startX,\n          h: this.curY - this.startY\n        };\n        this.ctx.strokeStyle = 'red';\n        this.ctx.strokeRect(rect.x, rect.y, rect.w, rect.h);\n      }\n\n      this.dirty = false;\n    };\n\n    this.onSelected = rect => {\n      this.setState(_objectSpread({\n        selected: true\n      }, rect));\n    };\n\n    this.onMouseDown = e => {\n      this.isDrag = true;\n      this.curX = this.startX = e.offsetX;\n      this.curY = this.startY = e.offsetY;\n      requestAnimationFrame(this.updateCanvas);\n    };\n\n    this.onMouseMove = e => {\n      this.curX = e.offsetX;\n      this.curY = e.offsetY;\n      this.isDirty = true;\n    };\n\n    this.onMouseUp = e => {\n      this.isDrag = false;\n      this.isDirty = true;\n      const rect = {\n        x: Math.min(this.startX, this.curX),\n        y: Math.min(this.startY, this.curY),\n        w: Math.abs(e.offsetX - this.startX),\n        h: Math.abs(e.offsetY - this.startY)\n      };\n      this.onSelected(rect);\n    };\n\n    this.selectFile = e => {\n      var url = URL.createObjectURL(e.target.files[0]);\n      this.setState({\n        url\n      });\n      const bref = this.refs.canvas;\n      let bcanvas = bref.canvas;\n      bcanvas.width = 640;\n      bcanvas.height = 425;\n      const ctx = bcanvas.getContext(\"2d\");\n    };\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n  init() {\n    let self = this;\n    this.canvas = document.getElementById('canvas2');\n    var myImage = new Image();\n    myImage.src = \"https://image.shutterstock.com/image-photo/bright-spring-view-cameo-island-260nw-1048185397.jpg\";\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.strokeStyle = 'red';\n\n    myImage.onload = function () {\n      self.ctx.drawImage(myImage, 0, 0, 300, 200);\n    }; // this.addMouseEvents()\n\n  }\n\n  // addMouseEvents() {\n  //   document.addEventListener('mousedown', this.onMouseDown, false);\n  //   document.addEventListener('mousemove', this.onMouseMove, false);\n  //   document.addEventListener('mouseup', this.onMouseUp, false);\n  // }\n  componentWillUnmount() {\n    this.removeMouseEvents();\n  }\n\n  removeMouseEvents() {\n    document.removeEventListener('mousedown', this.mousedown.bind(this), false);\n    document.removeEventListener('mousemove', this.mousemove.bind(this), false);\n    document.removeEventListener('mouseup', this.mouseup.bind(this), false);\n  }\n\n  getSelectionStr() {\n    if (this.state.selected) {\n      const state = this.state;\n      return `x: ${state.x}, y: ${state.y}, w: ${state.w}, h: ${state.h}`;\n    }\n  }\n\n  mousedown(e) {\n    // this.startX = e.pageX - 8;\n    // this.startY = e.pageY - 8;\n    // this.drag = true;\n    this.drag = true;\n    this.curX = this.startX = e.offsetX;\n    this.curY = this.startY = e.offsetY;\n    requestAnimationFrame(this.updateCanvas);\n  }\n\n  mouseup(e) {\n    // this.drag = false;\n    this.drag = false;\n    this.dirty = true; // const rect = {\n    //   x: Math.min(this.startX, this.curX),\n    //   y: Math.min(this.startY, this.curY),\n    //   w: Math.abs(e.offsetX - this.startX),\n    //   h: Math.abs(e.offsetY - this.startY),\n    // }\n    // this.onSelected(rect)\n  }\n\n  mousemove(e) {\n    // let canvas = document.getElementById('canvas2');\n    // let ctx = canvas.getContext('2d');\n    // let myImage = new Image();\n    // myImage.src = \"https://image.shutterstock.com/image-photo/bright-spring-view-cameo-island-260nw-1048185397.jpg\";\n    // if (this.drag) {\n    //     console.log('in ifffffff')\n    //     ctx.clearRect(0, 0, 500, 500);\n    //     myImage.onload = function() {\n    //       ctx.drawImage(myImage, 0, 0, 300, 200);\n    //     }\n    //     this.curX = e.offsetX\n    //     this.curY = e.offsetY\n    //     const rect = {\n    //       x: this.startX,\n    //       y: this.startY,\n    //       w: this.curX - this.startX,\n    //       h: this.curY - this.startY,\n    //     }\n    //   ctx.strokeStyle = 'red';\n    //   ctx.strokeRect(rect.startX, rect.startY, rect.w, rect.h);\n    // }\n    this.curX = e.offsetX;\n    this.curY = e.offsetY;\n    this.dirty = false;\n  }\n\n  render() {\n    // var rect = {};\n    // var drag = false;\n    const params = {\n      image: 'https://image.shutterstock.com/image-photo/mountains-during-sunset-beautiful-natural-260nw-407021107.jpg',\n      boxes: [{\n        coord: [this.state.inp1, this.state.inp2, this.state.inp3, this.state.inp4],\n        label: \"A\"\n      } // {coord: [300, 0, 250, 250], label: \"B\"},\n      // {coord: [700, 0, 300, 25], label: \"C\"},\n      // {coord: [1100, 0, 25, 300], label: \"D\"}\n      // onMouseUp={this.mouseup} onMouseMove={this.mousemove}\n      ],\n      options: {\n        colors: {\n          normal: 'rgba(255,225,255,1)',\n          selected: 'rgba(0,225,204,1)',\n          unselected: 'rgba(100,100,100,1)'\n        },\n        style: {\n          maxWidth: '100%',\n          maxHeight: '90vh'\n        },\n        showLabels: false\n      }\n    };\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      id: \"inp\",\n      onChange: this.selectFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), \"Enter coords:\", ' ', \"For Example: \", ' ', \" 300, 0, 250, 100\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"number\",\n      id: \"inp1\",\n      onChange: e => {\n        this.setState({\n          [e.target.id]: parseInt(e.target.value)\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"number\",\n      id: \"inp2\",\n      onChange: e => {\n        this.setState({\n          [e.target.id]: parseInt(e.target.value)\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"number\",\n      id: \"inp3\",\n      onChange: e => {\n        this.setState({\n          [e.target.id]: parseInt(e.target.value)\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"number\",\n      id: \"inp4\",\n      onChange: e => {\n        this.setState({\n          [e.target.id]: parseInt(e.target.value)\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(Boundingbox, {\n      ref: \"canvas\",\n      image: params.image,\n      boxes: params.boxes,\n      options: params.options,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), React.createElement(\"canvas\", {\n      ref: \"canvas2\",\n      id: \"canvas2\",\n      onMouseMove: this.mousemove.bind(this),\n      onMouseUp: this.mouseup.bind(this),\n      onMouseDown: this.mousedown.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), this.getSelectionStr());\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/airbook/Desktop/SaiTeja_Transin/bounding-box/src/App.js"],"names":["React","Boundingbox","App","Component","state","selected","x","y","w","h","canvas","ctx","dirty","drag","startX","startY","curX","curY","width","height","updateCanvas","self","requestAnimationFrame","document","getElementById","myImage","Image","src","getContext","onload","drawImage","clearRect","rect","strokeStyle","strokeRect","onSelected","setState","onMouseDown","e","isDrag","offsetX","offsetY","onMouseMove","isDirty","onMouseUp","Math","min","abs","selectFile","url","URL","createObjectURL","target","files","bref","refs","bcanvas","componentDidMount","init","componentWillUnmount","removeMouseEvents","removeEventListener","mousedown","bind","mousemove","mouseup","getSelectionStr","render","params","image","boxes","coord","inp1","inp2","inp3","inp4","label","options","colors","normal","unselected","style","maxWidth","maxHeight","showLabels","id","parseInt","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Boundingbox from 'react-bounding-box';\n\nclass App extends React.Component {\n  state = {\n    selected: false,\n    x: -1,\n    y: -1,\n    w: -1,\n    h: -1\n  };\n\n  canvas = null;\n  ctx = null;\n  dirty = false;\n  drag = false;\n  startX = -1;\n  startY = -1;\n  curX = -1;\n  curY = -1;\n  width = \"640\"\n  height= \"480\"\n\n  componentDidMount() {\n    this.init();\n  }\n\n  init() {\n    let self = this;\n    this.canvas = document.getElementById('canvas2');\n    var myImage = new Image();\n    myImage.src = \"https://image.shutterstock.com/image-photo/bright-spring-view-cameo-island-260nw-1048185397.jpg\";\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.strokeStyle = 'red';\n    myImage.onload = function() {\n      self.ctx.drawImage(myImage, 0, 0, 300, 200);\n    }\n    // this.addMouseEvents()\n  };\n\n  // addMouseEvents() {\n  //   document.addEventListener('mousedown', this.onMouseDown, false);\n  //   document.addEventListener('mousemove', this.onMouseMove, false);\n  //   document.addEventListener('mouseup', this.onMouseUp, false);\n  // }\n\n  componentWillUnmount() {\n    this.removeMouseEvents()\n  }\n\n  removeMouseEvents() {\n    document.removeEventListener('mousedown', this.mousedown.bind(this), false);\n    document.removeEventListener('mousemove', this.mousemove.bind(this), false);\n    document.removeEventListener('mouseup', this.mouseup.bind(this), false);\n  }\n\n  updateCanvas = () => {\n    let self = this;\n    if (this.drag) {\n      requestAnimationFrame(this.updateCanvas)\n    }\n    if (! this.dirty) {\n      return\n    }\n    this.canvas = document.getElementById('canvas2');\n    var myImage = new Image();\n    myImage.src = \"https://image.shutterstock.com/image-photo/bright-spring-view-cameo-island-260nw-1048185397.jpg\";\n    this.ctx = this.canvas.getContext('2d');\n    myImage.onload = function() {\n      self.ctx.drawImage(myImage, 0, 0, 300, 200);\n    }\n    this.ctx.clearRect(0, 0, this.width, this.height)\n    if (this.drag) {      \n      const rect = {\n        x: this.startX,\n        y: this.startY,\n        w: this.curX - this.startX,\n        h: this.curY - this.startY,\n      }\n      this.ctx.strokeStyle = 'red';\n      this.ctx.strokeRect(rect.x, rect.y, rect.w, rect.h)  \n    }  \n    this.dirty = false\n  };\n\n  onSelected = (rect) => {\n    this.setState({\n      selected: true,\n      ...rect\n    })\n  };\n\n  getSelectionStr() {\n    if (this.state.selected) {\n      const state = this.state\n      return `x: ${state.x}, y: ${state.y}, w: ${state.w}, h: ${state.h}`\n    }\n  }\n\n  onMouseDown = (e) => {\n    this.isDrag = true\n    this.curX = this.startX = e.offsetX\n    this.curY = this.startY = e.offsetY\n    requestAnimationFrame(this.updateCanvas)\n  };\n\n  onMouseMove = (e) => {\n    this.curX = e.offsetX\n    this.curY = e.offsetY\n    this.isDirty = true\n  };\n  \n  onMouseUp = (e) => {\n    this.isDrag = false\n    this.isDirty = true\n    \n    const rect = {\n      x: Math.min(this.startX, this.curX),\n      y: Math.min(this.startY, this.curY),\n      w: Math.abs(e.offsetX - this.startX),\n      h: Math.abs(e.offsetY - this.startY),\n    }\n    this.onSelected(rect)\n  };\n\n\n  mousedown(e){\n      // this.startX = e.pageX - 8;\n      // this.startY = e.pageY - 8;\n      // this.drag = true;\n      this.drag = true\n      this.curX = this.startX = e.offsetX\n      this.curY = this.startY = e.offsetY\n      requestAnimationFrame(this.updateCanvas)\n  }\n\n  mouseup(e){\n    // this.drag = false;\n    this.drag = false\n    this.dirty = true\n    \n    // const rect = {\n    //   x: Math.min(this.startX, this.curX),\n    //   y: Math.min(this.startY, this.curY),\n    //   w: Math.abs(e.offsetX - this.startX),\n    //   h: Math.abs(e.offsetY - this.startY),\n    // }\n    // this.onSelected(rect)\n  }\n\n  mousemove(e){\n    // let canvas = document.getElementById('canvas2');\n    // let ctx = canvas.getContext('2d');\n    // let myImage = new Image();\n    // myImage.src = \"https://image.shutterstock.com/image-photo/bright-spring-view-cameo-island-260nw-1048185397.jpg\";\n    // if (this.drag) {\n    //     console.log('in ifffffff')\n    //     ctx.clearRect(0, 0, 500, 500);\n    //     myImage.onload = function() {\n    //       ctx.drawImage(myImage, 0, 0, 300, 200);\n    //     }\n    //     this.curX = e.offsetX\n    //     this.curY = e.offsetY\n    //     const rect = {\n    //       x: this.startX,\n    //       y: this.startY,\n    //       w: this.curX - this.startX,\n    //       h: this.curY - this.startY,\n    //     }\n    //   ctx.strokeStyle = 'red';\n    //   ctx.strokeRect(rect.startX, rect.startY, rect.w, rect.h);\n    // }\n    this.curX = e.offsetX\n    this.curY = e.offsetY\n    this.dirty = false\n  }\n\n  selectFile = (e) => {\n    var url = URL.createObjectURL(e.target.files[0]);\n    this.setState({\n      url\n    })\n    const bref = this.refs.canvas;\n    let bcanvas = bref.canvas;\n    bcanvas.width = 640;\n    bcanvas.height = 425;\n    const ctx = bcanvas.getContext(\"2d\");\n  };\n\n\n  render(){\n    // var rect = {};\n    // var drag = false;\n    const params = {\n      image: 'https://image.shutterstock.com/image-photo/mountains-during-sunset-beautiful-natural-260nw-407021107.jpg',\n      boxes: [\n        {coord: [this.state.inp1, this.state.inp2, this.state.inp3, this.state.inp4], label: \"A\"},\n        // {coord: [300, 0, 250, 250], label: \"B\"},\n        // {coord: [700, 0, 300, 25], label: \"C\"},\n        // {coord: [1100, 0, 25, 300], label: \"D\"}\n        // onMouseUp={this.mouseup} onMouseMove={this.mousemove}\n      ],\n      options: {\n        colors: {\n          normal: 'rgba(255,225,255,1)',\n          selected: 'rgba(0,225,204,1)',\n          unselected: 'rgba(100,100,100,1)'\n        },\n        style: {\n          maxWidth: '100%',\n          maxHeight: '90vh',\n        },\n        showLabels: false\n      }\n    };\n\n    return (\n      <div className=\"App\">\n        <input type=\"file\" id=\"inp\" onChange={this.selectFile} />\n        <br /><br />\n        Enter coords:{' '}For Example: {' '} 300, 0, 250, 100\n        <br />\n        <input type=\"number\" id=\"inp1\" onChange={(e) => {this.setState({ [e.target.id]: parseInt(e.target.value) })}} />\n        <input type=\"number\" id=\"inp2\" onChange={(e) => {this.setState({ [e.target.id]: parseInt(e.target.value) })}} />\n        <input type=\"number\" id=\"inp3\" onChange={(e) => {this.setState({ [e.target.id]: parseInt(e.target.value) })}} />\n        <input type=\"number\" id=\"inp4\" onChange={(e) => {this.setState({ [e.target.id]: parseInt(e.target.value) })}} />\n        <br /><br />\n        <Boundingbox\n          ref=\"canvas\"\n          image={params.image}\n          boxes={params.boxes}\n          options={params.options}\n        />\n        <canvas ref=\"canvas2\" id=\"canvas2\" onMouseMove={this.mousemove.bind(this)} onMouseUp={this.mouseup.bind(this)} onMouseDown={this.mousedown.bind(this)} />\n        {this.getSelectionStr()}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}